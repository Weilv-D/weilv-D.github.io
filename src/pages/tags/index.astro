---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const allPosts = await getCollection('blog');
const tags = [...new Set(allPosts.map((post) => post.data.tags).flat())];
const pageTitle = "标签索引";
---

<BaseLayout title={`${pageTitle} | 未来回忆录`} description="按标签浏览文章">
    <section class="max-w-2xl mx-auto text-center">
        <h1 class="text-4xl font-serif font-bold mb-12">{pageTitle}</h1>
        <div class="flex flex-wrap justify-center gap-4">
            {tags.map((tag) => (
                <a href={`${import.meta.env.BASE_URL}tags/${tag}`} class="px-4 py-2 rounded-full border border-[var(--color-border)] hover:border-[var(--color-accent)] hover:text-[var(--color-accent)] transition-colors">
                    #{tag}
                </a>
            ))}
        </div>
    </section>
</BaseLayout>
